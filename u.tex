 
% !TeX program = LuaLaTeX

% coefficienti interi

\documentclass{article}

% un codice di libreria
\directlua{
parabolas = {}
parabolas.__index = parabolas
function parabolas:from_abc(a, b, c)
    if a == 0 then
        error([[Il coefficiente 'a' Ã¨ zero]])
    end
    local p = {a=a, b=b or 0, c=c or 0}
    setmetatable(p, self)
    return p
end

function parabolas:tex()
    local perc = string.char(37)
    local a = self.a
    if a == 1 then
        tex.sprint([[x^2]])
    elseif a == -1 then
        tex.sprint([[-x^2]])
    else
        local fmt2 = perc..[[d x^2]]
        tex.sprint(fmt2:format(a))
    end
    local b = self.b
    if not (b == 0) then
        if b > 0 then tex.sprint([[+]]) end
        local fmt1 = perc..[[d x]]
        tex.sprint(fmt1:format(b))
    end
    local c = self.c
    if not (c == 0) then
        if c > 0 then tex.sprint([[+]]) end
        local fmt0 = perc..[[d]]
        tex.sprint(fmt0:format(c))
    end
end
}

% un comando d'interfaccia
\newcommand{\trinomials}[1]{\directlua{
    local a, b, c = #1;
    local p = parabolas:from_abc(a, b, c)
    p:tex()
}}

\begin{document}
Ecco le parabole:
\[ y = \trinomials{1, -2, 1} \]

\[ y = \trinomials{-1, 0, 1} \]

\[ y = \trinomials{1, 3} \]

% \[ \trinomials{0, -2, 1} \] % errore
\end{document}
